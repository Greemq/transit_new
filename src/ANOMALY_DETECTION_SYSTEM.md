# –°–∏—Å—Ç–µ–º–∞ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –ê–Ω–æ–º–∞–ª–∏–π –≤ Gray Tranzit

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ Gray Tranzit –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç **728,904+ –∑–∞–ø–∏—Å–µ–π** —Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –≤—ã—è–≤–ª—è–µ—Ç **4 —Ç–∏–ø–∞ –∞–Ω–æ–º–∞–ª–∏–π** —Å —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º–æ–π –ø–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º.

## –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ê–Ω–æ–º–∞–ª–∏–π

### 1. –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç CSV —Ñ–∞–π–ª—ã —Å –ø–æ–ª—è–º–∏:
- –ö–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ù–æ–º–µ—Ä –Ω–∞—Ä—è–¥–∞  
- –í–µ—Å –≥—Ä—É–∑–∞
- –î–∞—Ç—ã –ø–µ—Ä–µ–¥–∞—á–∏/–ø—Ä–∏–±—ã—Ç–∏—è
- –ú–∞—Ä—à—Ä—É—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –°—Ç—Ä–∞–Ω—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è/–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

### 2. –ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π

**–í —Ñ–∞–π–ª–µ `/utils/csvParser.ts` (—Å—Ç—Ä–æ–∫–∏ 173-181):**
```javascript
// –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∞–ª–∏–∑ –∞–Ω–æ–º–∞–ª–∏–π (–∑–∞–≥–ª—É—à–∫–∞)
record.anomaly_probability = Math.random() > 0.7 ? 'high' : 
                           Math.random() > 0.5 ? 'elevated' :
                           Math.random() > 0.3 ? 'medium' : 'low';

record.anomaly_types = [];
if (Math.random() > 0.8) record.anomaly_types.push('weight');
if (Math.random() > 0.9) record.anomaly_types.push('time');
if (Math.random() > 0.85) record.anomaly_types.push('route');
```

**–í —Ñ–∞–π–ª–µ `/services/transitApi.ts` (—Å—Ç—Ä–æ–∫–∏ 496-505):**
```javascript
probability_category: probabilities[Math.floor(Math.random() * probabilities.length)],
anomalies,
risk_level: hasAnomalies ? riskLevels[Math.floor(Math.random() * 3) + 2] : riskLevels[Math.floor(Math.random() * 2)], // –≤—ã—à–µ —Ä–∏—Å–∫ –ø—Ä–∏ –∞–Ω–æ–º–∞–ª–∏—è—Ö
```

### 3. –ß–µ—Ç—ã—Ä–µ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¶–≤–µ—Ç–æ–≤–∞—è –°—Ö–µ–º–∞ | –î–∏–∞–ø–∞–∑–æ–Ω –°–æ–≤–ø–∞–¥–µ–Ω–∏–π | CSS –ö–ª–∞—Å—Å |
|-----------|---------------|-------------------|-----------|
| **–í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** | üî¥ –ö—Ä–∞—Å–Ω—ã–π | 15-20 —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π | `bg-red-100 text-red-800 border-red-300` |
| **–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** | üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π | 10-14 —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π | `bg-orange-100 text-orange-800 border-orange-300` |
| **–°—Ä–µ–¥–Ω—è—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** | üü° –ñ—ë–ª—Ç—ã–π | 5-9 —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π | `bg-yellow-100 text-yellow-800 border-yellow-300` |
| **–ù–∏–∑–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å** | üü¢ –ó–µ–ª—ë–Ω—ã–π | 1-4 —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è | `bg-green-100 text-green-800 border-green-300` |

### 4. –ß–µ—Ç—ã—Ä–µ –¢–∏–ø–∞ –ê–Ω–æ–º–∞–ª–∏–π

#### 4.1 –í–µ—Å–æ–≤—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏ (`weight_anomaly`)
- **–ò–∫–æ–Ω–∫–∞:** ‚öñÔ∏è (Weight)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤–µ—Å–∞ –º–µ–∂–¥—É –∏–º–ø–æ—Ä—Ç–æ–º –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–º
- **–ê–ª–≥–æ—Ä–∏—Ç–º:** 
  ```javascript
  const exportWeight = hasAnomalies && Math.random() > 0.5 
    ? importWeight + (Math.random() * 1000 - 500) // –¥–æ–±–∞–≤–ª—è–µ–º –∞–Ω–æ–º–∞–ª–∏—é –≤–µ—Å–∞
    : importWeight;
  ```

#### 4.2 –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏ (`time_anomaly`)
- **–ò–∫–æ–Ω–∫–∞:** üïê (Clock)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–∞—Ä—É—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–∞–º–æ–∫ —Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ö—Ä–∏—Ç–µ—Ä–∏–∏:** –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –∏–ª–∏ –º–∞–ª—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É –¥–∞—Ç–∞–º–∏

#### 4.3 –ú–∞—Ä—à—Ä—É—Ç–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏ (`route_anomaly`)
- **–ò–∫–æ–Ω–∫–∞:** üõ£Ô∏è (Route)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–∞—Ä—à—Ä—É—Ç–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- **–ö—Ä–∏—Ç–µ—Ä–∏–∏:** –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ–±—ã—á–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º

#### 4.4 –î—É–±–ª–∏–∫–∞—Ç—ã (`duplicate_anomaly`)
- **–ò–∫–æ–Ω–∫–∞:** üìã (Copy)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∑–∞–ø–∏—Å–µ–π
- **–ê–ª–≥–æ—Ä–∏—Ç–º:** 
  ```javascript
  if (seenIds.has(record.id)) {
    duplicateCount++;
    errorMessages.push(`–î—É–±–ª–∏–∫–∞—Ç –∑–∞–ø–∏—Å–∏: ${record.order_number || record.message_code || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`);
  }
  ```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –°–∏—Å—Ç–µ–º—ã

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∏–∑ `/services/transitApi.ts`):
```javascript
total_records: 728904,
probability_distribution: {
  high: 109,336 (15%),     // –í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
  elevated: 182,226 (25%), // –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å  
  medium: 255,117 (35%),   // –°—Ä–µ–¥–Ω—è—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
  low: 182,225 (25%)       // –ù–∏–∑–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–Ω–æ–º–∞–ª–∏–π:
```javascript
anomaly_stats: {
  total_anomalies: 32,694,
  by_type: {
    weight_anomaly: 12,456,    // –í–µ—Å–æ–≤—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏
    time_anomaly: 8,934,       // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏
    route_anomaly: 7,234,      // –ú–∞—Ä—à—Ä—É—Ç–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏
    duplicate_anomaly: 4,070   // –î—É–±–ª–∏–∫–∞—Ç—ã
  }
}
```

## –¶–≤–µ—Ç–æ–≤–∞—è –°—Ö–µ–º–∞ –≤ UI

### –í —Ç–∞–±–ª–∏—Ü–µ —Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:
- –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –∏–º–µ–µ—Ç –±–µ–π–¥–∂ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
- –¶–≤–µ—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —É—Ä–æ–≤–Ω—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
- –ê–Ω–æ–º–∞–ª–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∏–∫–æ–Ω–∫–∞–º–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–æ–ª–æ–Ω–∫–µ

### –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ (–∏–∑ `/utils/formatters.ts`):
```javascript
export const getProbabilityCategoryClass = (category: string): string => {
  switch (category) {
    case '–í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å':
      return 'bg-red-100 text-red-800 border-red-300';
    case '–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å':
      return 'bg-orange-100 text-orange-800 border-orange-300';
    case '–°—Ä–µ–¥–Ω—è—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å':
      return 'bg-yellow-100 text-yellow-800 border-yellow-300';
    case '–ù–∏–∑–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å':
      return 'bg-green-100 text-green-800 border-green-300';
    default:
      return 'bg-gray-100 text-gray-800 border-gray-300';
  }
};
```

## –£–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- ‚úÖ Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ 4 —Ç–∏–ø–∞ –∞–Ω–æ–º–∞–ª–∏–π —Å —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º–æ–π
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º –∏ —Ç–∏–ø–∞–º
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö —Å –∞–Ω–æ–º–∞–ª–∏—è–º–∏

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º ML –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º
- üîÑ –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- üîÑ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –∞–Ω–æ–º–∞–ª–∏–π

## –§–∞–π–ª—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –ª–æ–≥–∏–∫—É –∞–Ω–æ–º–∞–ª–∏–π:

1. **`/utils/csvParser.ts`** - –ë–∞–∑–æ–≤–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
2. **`/services/transitApi.ts`** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è mock –¥–∞–Ω–Ω—ã—Ö —Å –∞–Ω–æ–º–∞–ª–∏—è–º–∏
3. **`/utils/formatters.ts`** - –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
4. **`/components/tables/TransitDataTable.tsx`** - UI —Ç–∞–±–ª–∏—Ü—ã —Å –∞–Ω–æ–º–∞–ª–∏—è–º–∏
5. **`/stores/anomalyStore.ts`** - –°–æ—Å—Ç–æ—è–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π
6. **`/types/transit.ts`** - –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–æ–º–∞–ª–∏–π